<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My PWA</title>

  <link rel="manifest" href="./manifest.webmanifest" />
  <meta name="theme-color" content="#2563eb" />
</head>
<body>
  <h1>My PWA on GitHub Pages</h1>

  <button id="installBtn" hidden>CÃ i Ä‘áº·t (Install)</button>
  <p id="installHint"></p>

  <script>
    // 1) Register Service Worker
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js");
    }

    // 2) Custom install button (Chromium)
    let deferredPrompt = null;
    const installBtn = document.getElementById("installBtn");
    const hint = document.getElementById("installHint");

    window.addEventListener("beforeinstallprompt", (e) => {
      // NgÄƒn mini-infobar máº·c Ä‘á»‹nh vÃ  lÆ°u event Ä‘á»ƒ gá»i sau
      e.preventDefault();
      deferredPrompt = e;
      installBtn.hidden = false;
      hint.textContent = "Báº¡n cÃ³ thá»ƒ cÃ i app nÃ y vÃ o mÃ n hÃ¬nh chÃ­nh.";
    });

    installBtn.addEventListener("click", async () => {
      if (!deferredPrompt) return;

      deferredPrompt.prompt(); // má»Ÿ prompt cÃ i Ä‘áº·t
      const choice = await deferredPrompt.userChoice;

      // reset Ä‘á»ƒ trÃ¡nh gá»i láº¡i
      deferredPrompt = null;
      installBtn.hidden = true;

      hint.textContent = (choice.outcome === "accepted")
        ? "ÄÃ£ báº¯t Ä‘áº§u cÃ i Ä‘áº·t ğŸ‰"
        : "Báº¡n Ä‘Ã£ huá»· cÃ i Ä‘áº·t.";
    });

    window.addEventListener("appinstalled", () => {
      hint.textContent = "ÄÃ£ cÃ i Ä‘áº·t xong âœ…";
    });
  </script>
</body>
</html>
``
